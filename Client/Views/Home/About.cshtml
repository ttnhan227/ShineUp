@{
    ViewData["Title"] = "About ShineUp";
}

@section Styles {
    <link rel="stylesheet" href="~/css/site.css"/>
    <link rel="stylesheet" href="~/css/about.css"/>
}

<!-- Hero Section -->
<section class="position-relative vh-100 d-flex align-items-center justify-content-center parallax-section text-white">
    <div class="container text-center">
        <h1 class="display-2 fw-bold hero-title mb-4">Welcome to <span class="text-warning">ShineUp</span></h1>
        <p class="lead hero-subtitle mb-5">Discover, Compete, and Shine with Vietnam's Premier Talent Platform</p>
        <a href="#about" class="btn btn-lg btn-light rounded-pill px-5 py-3 shadow">
            Explore Our Story
            <i class="bi bi-arrow-down-circle ms-2"></i>
        </a>
    </div>
    <div class="custom-shape-divider">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path
                d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"></path>
        </svg>
    </div>
</section>

<!-- About Section -->
<section id="about" class="py-5 bg-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6" data-aos="fade-right">
                <h2 class="display-4 fw-bold text-gradient mb-4">Our Mission</h2>
                <p class="lead mb-4">Empowering talented individuals across Vietnam to showcase their abilities and
                    connect with a global audience through innovative digital competitions.</p>
                <div class="d-flex gap-4 mb-5">
                    <div class="stat-card text-center">
                        <div class="counter-value" data-target="1000">0</div>
                        <p class="text-muted">Active Users</p>
                    </div>
                    <div class="stat-card text-center">
                        <div class="counter-value" data-target="50">0</div>
                        <p class="text-muted">Contests Hosted</p>
                    </div>
                    <div class="stat-card text-center">
                        <div class="counter-value" data-target="5000">0</div>
                        <p class="text-muted">Video Submissions</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left">
                <img src="/images/about-illustration.jpg" class="img-fluid rounded shadow-sm" alt="About Illustration">
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center display-5 fw-bold mb-5" data-aos="fade-up">What Makes Us Special</h2>
        <div class="row g-4">
            @foreach (var feature in new[]
                          {
                              new { Icon = "bi-camera-video", Title = "Video Submissions", Description = "Share your talent through high-quality video submissions" },
                              new { Icon = "bi-trophy", Title = "Fair Competition", Description = "Transparent voting system ensures fair competition" },
                              new { Icon = "bi-graph-up", Title = "Real-time Analytics", Description = "Track your performance with detailed analytics" },
                              new { Icon = "bi-shield-check", Title = "Secure Platform", Description = "Advanced security measures to protect your content" }
                          })
            {
                <div class="col-md-6 col-lg-3" data-aos="fade-up">
                    <div class="feature-card p-4 h-100">
                        <i class="bi @feature.Icon feature-icon mb-3"></i>
                        <h4 class="h5 mb-3">@feature.Title</h4>
                        <p class="text-muted mb-0">@feature.Description</p>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Team Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center display-5 fw-bold mb-5" data-aos="fade-up">Meet Our Team</h2>
        <div class="row g-4">
            @foreach (var member in new[]
                          {
                              new { Name = "John Doe", Role = "Lead Developer", Image = "/images/JohnDoe.png" },
                              new { Name = "Jane Smith", Role = "UI/UX Designer", Image = "/images/JaneSmith.jpg" },
                              new { Name = "Mike Johnson", Role = "Project Manager", Image = "/images/ProjectManager.jpg" }
                          })
            {
                <div class="col-md-4" data-aos="fade-up">
                    <div class="team-card">
                        <img src="@member.Image" class="img-fluid" alt="@member.Name">
                        <div class="team-card-overlay">
                            <h4 class="text-white mb-2">@member.Name</h4>
                            <p class="text-white-50 mb-0">@member.Role</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-5 bg-primary text-white position-relative">
    <div class="container text-center py-5">
        <h2 class="display-4 fw-bold mb-4" data-aos="fade-up">Ready to Shine?</h2>
        <p class="lead mb-4" data-aos="fade-up" data-aos-delay="100">Join our community and showcase your talent to the
            world</p>
        <a href="/" class="btn btn-lg btn-light rounded-pill px-5 py-3" data-aos="fade-up" data-aos-delay="200">
            Go to Community
            <i class="bi bi-house ms-2"></i>
        </a>
    </div>
    <div class="wave-animation"></div>
</section>

<!-- Location Section -->
<section class="py-5 bg-light location-section">
    <div class="container">
        <div class="row align-items-start">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h3 class="fw-bold mb-3">FPT Aptech Campus</h3>
                <p class="text-muted">
                    391A Nam Ky Khoi Nghia, Ward 14,<br/>
                    District 3, Ho Chi Minh City 700000, Vietnam<br/>
                    📞 (028) 7300 1955<br/>
                    🌐 <a href="https://aptech.fpt.edu.vn/" target="_blank">aptech.fpt.edu.vn</a>
                </p>
                <p class="text-muted mb-0">
                    ShineUp is proudly incubated at FPT Aptech, a trusted leader in software education across Vietnam.
                </p>
            </div>
            <div class="col-lg-6">
                <div id="map" class="about-map shadow-sm"></div>
            </div>
        </div>
    </div>
</section>

<!-- Google Maps Logic (placed before script call to avoid async callback issues) -->
<script>
    function initMap() {
        const aptechLocation = {lat: 10.7907758, lng: 106.6818425};
        const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 16,
            center: aptechLocation,
            disableDefaultUI: true
        });

        const aptechMarker = new google.maps.Marker({
            position: aptechLocation,
            map: map,
            title: "FPT Aptech Campus"
        });

        const aptechInfo = new google.maps.InfoWindow({
            content: "<strong>FPT Aptech</strong><br>391A Nam Ky Khoi Nghia, D3, HCMC"
        });

        aptechMarker.addListener("click", () => {
            aptechInfo.open(map, aptechMarker);
        });

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function (position) {
                    const userLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    const userMarker = new google.maps.Marker({
                        position: userLocation,
                        map: map,
                        title: "Your Location",
                        icon: {
                            path: google.maps.SymbolPath.CIRCLE,
                            scale: 8,
                            fillColor: "#4285F4",
                            fillOpacity: 1,
                            strokeWeight: 2,
                            strokeColor: "#fff"
                        }
                    });

                    const userInfo = new google.maps.InfoWindow({
                        content: "<strong>Your Location</strong>"
                    });

                    userMarker.addListener("click", () => {
                        userInfo.open(map, userMarker);
                    });

                    const bounds = new google.maps.LatLngBounds();
                    bounds.extend(aptechLocation);
                    bounds.extend(userLocation);
                    map.fitBounds(bounds);
                },
                function () {
                    // User denied or error
                }
            );
        }
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=@ViewBag.GoogleMapsApiKey&callback=initMap" async
        defer></script>

@section Scripts {
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({duration: 800, once: true, offset: 100});

        // Easing function
        const easeOutExpo = t => t === 1 ? 1 : 1 - Math.pow(2, -10 * t); //hiệu ứng số chạy mượt thay vì nhảy đều đều.

        // Animate number counter
        function animateCounter(el, target) {
            let start = 0;
            const duration = 2000;
            const startTime = performance.now();

            function update(time) {
                const elapsed = time - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = easeOutExpo(progress);
                el.textContent = Math.floor(eased * target);
                if (progress < 1) requestAnimationFrame(update);
            }

            requestAnimationFrame(update);
        }

        document.querySelectorAll('.counter-value').forEach(counter => {
            const target = parseInt(counter.dataset.target);

            const observer = new IntersectionObserver(entries => {
                if (entries[0].isIntersecting) {
                    animateCounter(counter, target);
                    observer.unobserve(counter);
                }
            });

            observer.observe(counter);
        });
    </script>
}
