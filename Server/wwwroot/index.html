<!DOCTYPE html>
<html>
<head>
    <title>Google Login</title>
</head>
<body>
    <h1>Google Login Example</h1>
    <p>Click the button below to log in with Google:</p>
    <button onclick="loginWithGoogle()">Login with Google</button>

    <div id="profile-link" style="display:none;">
        <p>Go to your <a href="/profile.html">profile</a></p>
    </div>

    <script>
        function loginWithGoogle() {
            window.location.href = '/api/auth/google-challenge';
        }

        // Check if the user is logged in (e.g., by checking local storage)
        function isLoggedIn() {
            return localStorage.getItem('isLoggedIn') === 'true';
        }

        // Function to set the login state in local storage
        function setLoggedIn() {
            localStorage.setItem('isLoggedIn', 'true');
            updateProfileLinkVisibility();
        }

        // Function to update the visibility of the profile link
        function updateProfileLinkVisibility() {
            const profileLinkDiv = document.getElementById('profile-link');
            if (isLoggedIn()) {
                profileLinkDiv.style.display = 'block';
            } else {
                profileLinkDiv.style.display = 'none';
            }
        }

        // Call updateProfileLinkVisibility on page load
        updateProfileLinkVisibility();

        // Listen for the callback from Google (you might need to adjust this based on your actual callback handling)
        // This is a simplified example; in a real application, you would handle the callback properly
        if (window.location.href.includes('/signin-google')) {
            setLoggedIn();
        }
    </script>
</body>
</html>
